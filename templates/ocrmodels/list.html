{% extends "standard.html" %}
{% load tagging_tags %}
{% tags_for_model ocrmodels.OcrModel as modeltags %}

{% block title %} OCRopodium - Models {% endblock %}

{% block headerscript %}
    <link rel="stylesheet" href="/static/css/models.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/static/css/table.css" type="text/css" media="screen" />

<style type="text/css">
    #formholder {
        display: none;
    }

    #dialog_box {
        display: none;
    }
</style>
<script type="text/javascript">

$(document).ready(function() {
    $("li.success").slideDown(3000).delay(1000).fadeOut();
    $(".delete_model_link").live("click", function(e) {
        return confirm("Are you sure you want to delete this model?");
    }); 
    
    // filter table by tags
    $(".model_tag_link").live("click", function(e) {
        $("#modellist").load($(this).attr("href"));
        return false;            
    });

    // sort table on headers
    $(".sort_table").live("click", function(e) {
        $("#modellist").load($(this).attr("href")); 
        return false;
    });


    // show new & edit forms in a dialog...
    $(".show_model_link, .edit_model_link").live("click", function(e) {
            $("#dialog_box").dialog(
                {width:600, height:500, title: $(this).attr("title")}
            ).load($(this).attr("href"));
            return false;
    });

    // Ajaxify cancel button    
    $("#cancel_new_model_form, #cancel_edit_model_form").live("click", function(e) {
        $("#dialog_box").dialog("destroy");
        return false;
    });
});
</script>


{% endblock %}

{% block content %}

    {% include "ocrmodels/includes/sidebar.html" %}

<div id="document_window">

    {% if messages %}
    <ul class="messages">
    {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
    </ul>
    {% endif %}

    <div id="modellist" class="widget">
        <div class="widget_header">
            <div class="new_link_container">
                <a href="/ocrmodels/new" class="new_link">Upload New Model</a>
            </div>
            Available Models:
        </div>
        {% include "ocrmodels/includes/model_list.html" %}
    </div>
    <div id="dialog_box"></div>
</div>
{% endblock %}
